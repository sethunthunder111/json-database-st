<!DOCTYPE html>
<html lang="en" class="bg-black text-white antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benchmarks | JSONDB v3</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.33/dist/lenis.min.js"></script>

    <style>
        :root { --accent: #ccff00; }
        body { font-family: 'Space Grotesk', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        .bar-container { 
            width: 100%; background: #111; height: 60px; margin-bottom: 1rem; position: relative; border: 1px solid #333;
        }
        .bar-fill { 
            height: 100%; background: var(--accent); transition: width 1.5s cubic-bezier(0.22, 1, 0.36, 1); width: 0;
        }
        .bar-label { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-family: 'JetBrains Mono', monospace; font-weight: bold; color: black; mix-blend-difference; z-index: 10; }
        .bar-value { position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); font-family: 'JetBrains Mono', monospace; font-weight: bold; color: white; }
    </style>
</head>
<body>

    <nav class="fixed w-full z-50 mix-blend-difference px-6 py-6 flex justify-between items-center pointer-events-none">
        <div class="text-xl font-bold font-mono pointer-events-auto cursor-pointer" onclick="location.href='index.html'">
            JSONDB<span class="text-[#ccff00]">_v3</span>
        </div>
        <div class="flex gap-8 font-mono text-sm pointer-events-auto">
            <a href="docs.html" class="hover:text-[#ccff00] transition">[DOCS]</a>
            <a href="index.html" class="hover:text-[#ccff00] transition">[HOME]</a>
        </div>
    </nav>

    <header class="pt-40 pb-20 px-6 border-b border-white/10">
        <h1 class="text-6xl md:text-9xl font-bold uppercase leading-none mb-8">
            Proof of<br><span class="text-[#ccff00]">Power.</span>
        </h1>
        <p class="font-mono text-gray-400 max-w-2xl">
            Comparing v3 (Rust Core) against v2 (Pure JS) and the file system limits.
            <br>System: Windows 11, Node v24, NVMe SSD.
        </p>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-20">
        
        <!-- Throughput Section -->
        <section class="mb-32">
            <div class="flex items-baseline gap-4 mb-12 border-b border-white/20 pb-4">
                <h2 class="text-4xl font-bold">Write Throughput</h2>
                <span class="font-mono text-sm text-[#ccff00]">HIGHER IS BETTER</span>
            </div>

            <!-- Chart 1 -->
            <div class="mb-12">
                <div class="bar-container">
                    <div class="bar-fill" style="width: 92%"></div>
                    <span class="bar-label">v3 In-Memory (Seq)</span>
                    <span class="bar-value">~92,000 ops/sec</span>
                </div>
                <div class="bar-container">
                    <div class="bar-fill" style="width: 65%"></div>
                    <span class="bar-label">v3 Durable (WAL)</span>
                    <span class="bar-value">~65,000 ops/sec</span>
                </div>
                <div class="bar-container">
                    <div class="bar-fill bg-gray-600" style="width: 12%"></div>
                    <span class="bar-label text-white">v2 Legacy</span>
                    <span class="bar-value">~12,000 ops/sec</span>
                </div>
            </div>
        </section>

        <!-- Latency Section -->
        <section class="mb-32">
            <div class="flex items-baseline gap-4 mb-12 border-b border-white/20 pb-4">
                <h2 class="text-4xl font-bold">Update Latency</h2>
                <span class="font-mono text-sm text-[#ccff00]">LOWER IS BETTER</span>
            </div>

            <div class="grid md:grid-cols-2 gap-12">
                <div class="border border-white/20 p-8">
                    <h3 class="text-2xl font-bold mb-2">v2 Legacy</h3>
                    <div class="text-6xl font-mono font-bold text-red-500 mb-4">6,343<span class="text-xl">ms</span></div>
                    <p class="text-sm text-gray-500 font-mono">
                        Updating 1 record in a 1M dataset required rewriting the entire 172MB file.
                    </p>
                </div>

                <div class="border border-[#ccff00] p-8 bg-[#ccff00]/5 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-[#ccff00] text-black text-xs font-bold px-2 py-1">WINNER</div>
                    <h3 class="text-2xl font-bold mb-2 text-[#ccff00]">v3 Rust Core</h3>
                    <div class="text-6xl font-mono font-bold text-[#ccff00] mb-4">0.05<span class="text-xl">ms</span></div>
                    <p class="text-sm text-gray-400 font-mono">
                        Updates are O(1) memory operations + O(1) append-only log. 
                        <br><strong>125,000x Improvement.</strong>
                    </p>
                </div>
            </div>
        </section>

        <!-- Table -->
        <section>
            <h2 class="text-4xl font-bold mb-12">Raw Data (1M Records)</h2>
            <div class="border border-white/20 overflow-x-auto">
                <table class="w-full text-left font-mono text-sm">
                    <thead class="bg-white/10 text-[#ccff00] uppercase">
                        <tr>
                            <th class="p-4 border-r border-white/10">Metric</th>
                            <th class="p-4 border-r border-white/10">v3 In-Memory</th>
                            <th class="p-4 border-r border-white/10">v3 Durable</th>
                            <th class="p-4">v2 Legacy</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-white/10">
                        <tr>
                            <td class="p-4 border-r border-white/10 font-bold">Write Ops/Sec</td>
                            <td class="p-4 border-r border-white/10">89,404</td>
                            <td class="p-4 border-r border-white/10">64,514</td>
                            <td class="p-4 text-gray-500">57,845*</td>
                        </tr>
                        <tr>
                            <td class="p-4 border-r border-white/10 font-bold">Update Latency</td>
                            <td class="p-4 border-r border-white/10">0.05ms</td>
                            <td class="p-4 border-r border-white/10">0.05ms</td>
                            <td class="p-4 text-red-500">6,343ms</td>
                        </tr>
                        <tr>
                            <td class="p-4 border-r border-white/10 font-bold">Read Latency</td>
                            <td class="p-4 border-r border-white/10">~0.1ms</td>
                            <td class="p-4 border-r border-white/10">~0.1ms</td>
                            <td class="p-4 text-gray-500">~0.1ms</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="mt-4 text-xs text-gray-500 font-mono">* v2 Write Ops/Sec degrades significantly as file size grows. v3 remains constant.</p>
        </section>

    </main>

    <script>
        const lenis = new Lenis()
        function raf(time) {
            lenis.raf(time)
            requestAnimationFrame(raf)
        }
        requestAnimationFrame(raf)

        // Animate Bars on Load
        setTimeout(() => {
            const bars = document.querySelectorAll('.bar-fill');
            // Trigger redraw to ensure transition happens
            bars.forEach(b => {
                const w = b.style.width;
                b.style.width = '0';
                setTimeout(() => b.style.width = w, 100);
            });
        }, 100);
    </script>
</body>
</html>